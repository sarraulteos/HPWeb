function JmfLog(a){this.jmf_config=a,this.feature_setting={FirstTimeJoin:void 0,PrimaryDownloadMethod:void 0,GPCActiveX:void 0,GPCPlugin:void 0,JavaStatus:void 0,JavaVersion:void 0,JavaVendor:void 0},this.event_type=[],this.full_sequence=[],this.start1=$.now(),this.start2=this.start1,this.error_code=0,this.error_msg=null}window.pFormat=function(a){return a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()+":"+a.getMilliseconds()},window.sendjmtdlog=function(){if(jmf_log&&""!=jmf_log){var a=(new Date).getTime()-gointopagetime;try{console.log("postJMFlogStart->"+pFormat(new Date))}catch(b){}jmf_log.postLog(a);try{console.log("postJMFlogend->"+pFormat(new Date))}catch(b){}}},JmfLog.prototype.addLog=function(a,b,c){var e,f,g,h,d=a.event_type;d&&(e="["+($.now()-this.start2)+"]",this.start2=$.now(),this.event_type=d,this.full_sequence.push(d+e)),f=a.feature_setting,f&&(this.feature_setting=$.extend(this.feature_setting,f)),g=a.error_code,g&&(this.error_code=g),h=a.error_msg,h&&(this.error_msg=h),b===!0&&this.postLog(),1==c&&setTimeout("sendjmtdlog()",20)},JmfLog.prototype.postLog=function(a){var b,c,d;if(this.event_type&&this.full_sequence.length>0){b=["CostTime:"+($.now()-this.start1)];for(c in this.feature_setting)d=this.feature_setting[c],null!==d&&"undefined"!=typeof d&&b.push(c+":"+d);a&&(this.jmf_config.url=this.jmf_config.url.replace(/\?delta.*/g,""),this.jmf_config.url=this.jmf_config.url+"?delta="+a),$.post(this.jmf_config.url,$.extend(this.jmf_config.data,{eventType:this.event_type},{errorCode:this.error_code},{fullSequence:this.full_sequence.join(",")},b.length>0&&{featureSetting:b.join(",")},this.error_msg&&{errorMsg:this.error_msg})),this.feature_setting={FirstTimeJoin:void 0,PrimaryDownloadMethod:void 0,GPCActiveX:void 0,GPCPlugin:void 0,JavaStatus:void 0,JavaVersion:void 0,JavaVendor:void 0},this.event_type="",this.error_code=0,this.full_sequence=[],this.start1=$.now(),this.start2=this.start1}};